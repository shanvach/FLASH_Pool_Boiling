Jan 4, 2005

IO CONVERTER

Summary
This tool will allow a user to convert an io file from
one hdf5 to pnetcdf or from pnetcdf to hdf5.  This is done primarily through
the setup script with only a few lines of code changed in 
the actual flash code.  In order to convert a checkpoint file the 
problem will be setup with 2 io modules, rather than only one.  One io module
will be used to read in the file and the other module will be used
to write out the new file.  The only change that the user needs to specify
is at setup time.  

A Setup Example
 with the option -io_convert=from:to
where from and to are the entire paths. 

For example:
setup sedov -2d -io_convert=io/amr/hdf5_parallel:io/amr/ncmpi

If the user wants to convert a checkpoint file from a wd_def, a wd_def setup is required. 

Besides this change, flash will run as
usual.  This tool can be used to simply convert a file or to restart
a run with one io module and continue it with another.  In order to 
run the converter there must be a flash.par file with restart
set to true and a valid io checkpoint file.  Before this change, when restart
was set equal to true a given checkpoint file, hdf5_chk_0005 was read 
in and the next
output was hdf5_chk_0006.  When the "io_convert" option is used at setup time the initial checkpoint 
file is translated into it's new format and then the code will continue
as usual.  For example, hdf5_chk_0005 is read in, the next output file is
ncmpi_chk_0005, and next is ncmpi_chk_0006.


Changes in the Code
* Checkpoint.F90 files contained both checkpoint_re and checkpoint_wr, these were divided into 2 separate files -- the Makefiles were also changed to reflect this.
* Most of the changes were to the setup script which specifically linked 
checkpoint_re or checkpoint_wr to the appropriate io modules.